<div class="mlpm-wrapper" [class.collapsed]="collapsed">
  @for (level of allLevels; track $index; let i = $index) {
    <div
      class="mlpm-level"
      [style.transform]="'translateX(' + (i - activeIndex) * 100 + '%)'"
      [style.zIndex]="i + 1"
      >
      <div class="mlpm-header">
        <h2 class="mlpm-title">{{ getLevelTitle(i) }}</h2>
        <ng-mlpm-icon
          [name]="getIconName(getLevelIcon(i))"
          size="24"
          (click)="onTitleIconClick()"
          class="mlpm-icon"
          [class.clickable]="i === 0"
          [type]="'title'"
        ></ng-mlpm-icon>
      </div>
      @if (i > 0) {
        <button class="mlpm-back-button" (click)="goBack()">
          <ng-mlpm-icon
            name="arrow-left"
            size="20"
            class="mlpm-back-icon"
          ></ng-mlpm-icon>
          <span>Back</span>
        </button>
      }
      <ul class="mlpm-list">
        @for (item of level; track item.label) {
          <li
            (click)="openSubmenu(item)"
            (keydown.enter)="openSubmenu(item)"
            (keydown.space)="openSubmenu(item)"
            tabindex="0"
            >
            <span class="mlpm-item-content">
              @if (item.icon) {
                <ng-mlpm-icon
                  [name]="getIconName(item.icon)"
                  size="20"
                  class="mlpm-item-icon"
                ></ng-mlpm-icon>
              }
              <span class="mlpm-item-label">{{ item.label }}</span>
            </span>
            @if (item.children) {
              <ng-mlpm-icon
                name="chevron-right"
                size="16"
                class="mlpm-item-arrow"
              ></ng-mlpm-icon>
            }
          </li>
        }
      </ul>
    </div>
  }
</div>

<div class="mlpm-content" [ngClass]="{ collapsed: collapsed }">
  <ng-content></ng-content>
</div>
